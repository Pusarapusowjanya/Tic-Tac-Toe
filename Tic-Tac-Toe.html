<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Tic-Tac-Toe AI</title>
        <style>
            body {
                background: linear-gradient(120deg, #89f7fe 0%, #e714b9 100%);
                font-family: 'segoe UI', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: 100vh;
                margin: 0;
                color: #333;
            }
            h1 {
                margin-bottom: 20px;
                color: #fff;
            }
            #board {
                display: grid;
                grid-template-columns: repeat(3, 100px);
                gap: 10px;
            }
            .cell {
                width: 100px;
                height: 100px;
                background-color: #fff;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 36px;
                font-weight: blod;
                border-radius: 10px;
                box-shadow: 0 4px 8px rgba(0,0,0,0.1);
                cursor: pointer;
                transition: background 0.3s;
            }
            .cell:hover {
                background-color: #f0f8ff;
            }
            #message {
                margin-top: 20px;
                font-size: 20px;
                color: #fff;
            }
            button {
                margin-top: 20px;
                padding: 10px 20px;
                font-size: 16px;
                border: none;
                border-radius: 5px;
                background-color: #fff;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <h1>Tic-Tac-Toe: You (X) vs AI (0)</h1>
        <div id="board"></div>
        <div id="message"></div>
        <button onclick="resetGame()">Restart Game</button>

        <script>
            let board = Array(9).fill(" ");
            const boardDiv = document.getElementById("board");
            const messageDiv = document.getElementById("message");

        function renderBoard() {
            boardDiv.innerHTML = "";
            board.forEach((cell, index) => {
                const div = document.createElement("div");
                div.className = "cell";
                div.innerText = cell;
                div.onclick = () => handleClick(index);
                boardDiv.appendChild(div);
            });
        }
        function handleClick(index) {
            if (board[index] !== " " || checkWinner(board)) return;
            board[index] = "X";
            renderBoard();
            if (checkWinner(board)) {
                messageDiv.innerText = "you win!";
                return;
            }
            if (isDraw(board)) {
                messageDiv.innerText = "It's a draw!";
                return;
            }
            setTimeout(aiTurn, 300);
        }
        function aiTurn() {
            const bestMove = getBestMove();
            board[bestMove] = "0";
            renderBoard();
            if (checkWinner(board)) {
                messageDiv.innerText = "AI wins!";
                return;
            }
            if (isDraw(board)) {
                messageDiv.innerText = "It's a draw!";
            }
        }
            function isDraw(board) {
                return board.every(cell => cell !== " ");
            }
        
            function checkWinner(board) {
                const winPatterns = [[0,1,2], [3,4,5], [6,7,8], [0,3,6], [1,4,7], [2,5,8], [0,4,8], [2,4,6]];
                for (const pattern of winPatterns) {
                    const[a,b,c] = pattern;
                    if (board[a] !== " " && board[a] === board[b] && board[b] === board[c]) {
                        return true;
                    }
                }
                return false;
            }

            function getAvailableMoves() {
                return board.map((v, i) => v === " " ? i : null).filter(v => v !== null);
            }
            function getBestMove() {
                let bestScore = -Infinity;
                let move;
                getAvailableMoves().forEach(i => {
                    board[i] = "0";
                    let score = minimax(board, 0, false);
                    board[i] = " ";
                    if (score > bestScore) {
                        bestScore = score;
                        move = i;
                    }
                });
                return move;
            }
            function minimax(board, depth, isMaximizing) {
                if (checkWinner(board)) return isMaximizing ? -1 : 1;
                if (isDraw(board)) return 0;

                if (isMaximizing) {
                    let best = -Infinity;
                    getAvailableMoves().forEach(i => {
                        board[i] = "0";
                        best = Math.max(best, minimax(board, depth + 1, false));
                        board[i] = " ";
                    });
                    return best;
                } else {
                    let best = Infinity;
                    getAvailableMoves().forEach(i => {
                        board[i] = "X";
                        best =  Math.min(best, minimax(board, depth + 1, true));
                        board[i] = " ";
                    });
                    return best;
                }
            }
            function resetGame() {
                board = Array(9).fill(" ");
                messageDiv.innerText = "";
                renderBoard();
            }
            renderBoard();
        </script>
    </body>
</html>
